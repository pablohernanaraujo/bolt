{"version":3,"file":"helpers.js","sources":["../../../src/ui/file-upload/helpers.ts"],"sourcesContent":["import * as styles from './file-upload.css';\nlet fileIdCounter = 0;\nexport const createFileUploadFile = (file) => {\n    const fileUploadFile = file;\n    fileIdCounter += 1;\n    fileUploadFile.id = `${file.name}-${file.size}-${file.lastModified}-${fileIdCounter}`;\n    if (typeof window !== 'undefined' && file.type.startsWith('image/')) {\n        fileUploadFile.preview = URL.createObjectURL(file);\n    }\n    return fileUploadFile;\n};\nexport const fileListToArray = (fileList) => {\n    if (!fileList)\n        return [];\n    return Array.from(fileList).map(createFileUploadFile);\n};\nexport const formatFileSize = (bytes) => {\n    if (bytes === 0)\n        return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return (Number.parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]);\n};\nexport const getFileExtension = (filename) => {\n    const lastDot = filename.lastIndexOf('.');\n    return lastDot !== -1 ? filename.slice(lastDot) : '';\n};\nexport const isFileTypeAccepted = (file, acceptedTypes) => {\n    if (!acceptedTypes || acceptedTypes.length === 0)\n        return true;\n    const fileType = file.type;\n    const fileName = file.name.toLowerCase();\n    return acceptedTypes.some((type) => {\n        if (type.includes('*')) {\n            const pattern = type.replace('*', '.*');\n            return new RegExp(pattern).test(fileType);\n        }\n        if (type.includes('/')) {\n            return fileType === type;\n        }\n        const extension = type.startsWith('.') ? type : `.${type}`;\n        return fileName.endsWith(extension.toLowerCase());\n    });\n};\nexport const validateFile = (file, maxFileSize, acceptedTypes) => {\n    if (maxFileSize && file.size > maxFileSize) {\n        return {\n            isValid: false,\n            error: 'file-too-large',\n            message: `El archivo es demasiado grande. Máximo ${formatFileSize(maxFileSize)}.`,\n        };\n    }\n    if (!isFileTypeAccepted(file, acceptedTypes)) {\n        const acceptedTypesStr = acceptedTypes?.join(', ') || '';\n        return {\n            isValid: false,\n            error: 'file-invalid-type',\n            message: `Tipo de archivo no permitido. Tipos aceptados: ${acceptedTypesStr}`,\n        };\n    }\n    return { isValid: true };\n};\nexport const validateFiles = (files, maxFiles, maxFileSize, acceptedTypes) => {\n    if (maxFiles && files.length > maxFiles) {\n        return {\n            isValid: false,\n            error: 'too-many-files',\n            message: `Demasiados archivos. Máximo ${maxFiles} archivos permitidos.`,\n        };\n    }\n    for (const file of files) {\n        const fileValidation = validateFile(file, maxFileSize, acceptedTypes);\n        if (!fileValidation.isValid) {\n            return fileValidation;\n        }\n    }\n    return { isValid: true };\n};\nexport const cleanupFilePreviews = (files) => {\n    if (typeof window === 'undefined')\n        return;\n    for (const file of files) {\n        if (file.preview) {\n            URL.revokeObjectURL(file.preview);\n        }\n    }\n};\nexport const buildFileUploadRootClassName = (variant = 'outline', size = 'medium', isDisabled = false, hasError = false, className) => {\n    const classes = [\n        styles.fileUploadRoot,\n        styles.variants[variant],\n        styles.sizes[size],\n    ];\n    if (isDisabled) {\n        classes.push(styles.disabled);\n    }\n    if (hasError) {\n        classes.push(styles.error);\n    }\n    if (className) {\n        classes.push(className);\n    }\n    return classes.join(' ');\n};\nexport const buildFileUploadTriggerClassName = (size = 'medium', isDisabled = false, className) => {\n    const classes = [styles.trigger];\n    if (isDisabled) {\n        classes.push(styles.triggerDisabled);\n    }\n    if (className) {\n        classes.push(className);\n    }\n    return classes.join(' ');\n};\nexport const buildFileUploadListClassName = (className) => {\n    const classes = [styles.list];\n    if (className) {\n        classes.push(className);\n    }\n    return classes.join(' ');\n};\nexport const buildFileUploadItemClassName = (hasError = false, className) => {\n    const classes = [styles.item];\n    if (hasError) {\n        classes.push(styles.itemError);\n    }\n    if (className) {\n        classes.push(className);\n    }\n    return classes.join(' ');\n};\nexport const isImageFile = (file) => file.type.startsWith('image/');\nexport const getFileTypeIcon = (file) => {\n    const type = file.type;\n    const extension = getFileExtension(file.name).toLowerCase();\n    if (type.startsWith('image/')) {\n        return 'image';\n    }\n    if (type === 'application/pdf' || extension === '.pdf') {\n        return 'file-text';\n    }\n    if (type.startsWith('video/')) {\n        return 'video';\n    }\n    if (type.startsWith('audio/')) {\n        return 'music';\n    }\n    if (['zip', 'rar', '7z', 'tar', 'gz'].some((ext) => extension.includes(ext))) {\n        return 'archive';\n    }\n    return 'file';\n};\nexport const buildAcceptString = (acceptedTypes) => {\n    if (!acceptedTypes || acceptedTypes.length === 0)\n        return undefined;\n    return acceptedTypes.join(',');\n};\n"],"names":["styles.fileUploadRoot","styles.variants","styles.sizes","styles.disabled","styles.error","styles.trigger","styles.triggerDisabled","styles.list","styles.item","styles.itemError"],"mappings":"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"}