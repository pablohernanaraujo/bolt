{"version":3,"file":"theme-toggle-progressive.js","sources":["../../../src/ui/theme-toggle/theme-toggle-progressive.tsx"],"sourcesContent":["'use client';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Settings } from 'lucide-react';\nimport { useEffect, useRef, useState } from 'react';\nimport { Icon } from '@/icons';\nimport { Button } from '@/ui/button';\nimport { buildThemeToggleClassName } from './helpers';\nexport const ThemeToggleProgressive = ({ initialTheme, showLabel = true, size = 'small', variant = 'secondary', className, ...props }) => {\n    const [currentTheme, setCurrentTheme] = useState(initialTheme);\n    const [isEnhanced, setIsEnhanced] = useState(false);\n    const formRef = useRef(null);\n    useEffect(() => {\n        const form = formRef.current;\n        if (!form)\n            return;\n        const handleSubmit = (event) => {\n            event.preventDefault();\n            const currentDocTheme = document.documentElement.getAttribute('data-theme') ||\n                currentTheme;\n            const newTheme = currentDocTheme === 'light' ? 'dark' : 'light';\n            setCurrentTheme(newTheme);\n            document.documentElement.setAttribute('data-theme', newTheme);\n            const { lightTheme, darkTheme } = require('@/tokens/themes');\n            const oldThemeClass = currentDocTheme === 'light' ? lightTheme : darkTheme;\n            const newThemeClass = newTheme === 'light' ? lightTheme : darkTheme;\n            if (document.body.classList.contains(oldThemeClass)) {\n                document.body.classList.remove(oldThemeClass);\n            }\n            document.body.classList.add(newThemeClass);\n            document.cookie = `theme=${newTheme}; path=/; max-age=${60 * 60 * 24 * 365}; SameSite=Lax`;\n            const hiddenInput = form.querySelector('input[name=\"theme\"]');\n            if (hiddenInput) {\n                const nextTheme = newTheme === 'light' ? 'dark' : 'light';\n                hiddenInput.value = nextTheme;\n            }\n            window.dispatchEvent(new CustomEvent('themechange', {\n                detail: { theme: newTheme },\n            }));\n        };\n        form.addEventListener('submit', handleSubmit);\n        setIsEnhanced(true);\n        return () => {\n            form.removeEventListener('submit', handleSubmit);\n        };\n    }, [currentTheme]);\n    useEffect(() => {\n        const documentTheme = document.documentElement.getAttribute('data-theme');\n        if (documentTheme && documentTheme !== initialTheme) {\n            setCurrentTheme(documentTheme);\n        }\n    }, [initialTheme]);\n    const nextTheme = currentTheme === 'light' ? 'dark' : 'light';\n    const buttonText = showLabel\n        ? currentTheme === 'light'\n            ? 'Tema Oscuro'\n            : 'Tema Claro'\n        : '';\n    const themeToggleClassName = buildThemeToggleClassName(className);\n    return (_jsxs(\"form\", { ref: formRef, method: \"POST\", action: \"/api/theme\", style: { display: 'inline' }, children: [_jsx(\"input\", { type: \"hidden\", name: \"theme\", value: nextTheme }), _jsxs(Button, { type: \"submit\", variant: variant, size: size, className: themeToggleClassName, \"aria-label\": `Switch to ${nextTheme} theme`, \"data-enhanced\": isEnhanced, ...props, children: [_jsx(Icon, { icon: Settings, size: \"sm\" }), buttonText] })] }));\n};\n"],"names":["_jsxs","_jsx","Button"],"mappings":"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"}