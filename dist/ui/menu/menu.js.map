{"version":3,"file":"menu.js","sources":["../../../src/ui/menu/menu.tsx"],"sourcesContent":["'use client';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { forwardRef, useEffect, useState, } from 'react';\nimport { Menu as AriaMenu, MenuItem as AriaMenuItem, MenuTrigger as AriaMenuTrigger, Popover, Section, Separator, } from 'react-aria-components';\nimport { darkTheme, lightTheme } from '@/tokens/themes';\nimport { buildMenuClassName, buildMenuItemClassName, buildMenuSectionClassName, buildMenuSeparatorClassName, getAriaPlacement, getMenuWidthConstraints, getOffsetForSize, getTransformOrigin, shouldShowShortcut, } from './helpers';\nimport * as styles from './menu.css';\nexport const MenuTrigger = ({ children, ...props }) => _jsx(AriaMenuTrigger, { ...props, children: children });\nexport const Menu = ({ children, placement = 'bottom start', size = 'medium', variant = 'default', offset: customOffset, maxWidth: customMaxWidth, minWidth: customMinWidth, closeOnSelect = true, onAction, items, isDismissable = true, className, isDisabled = false, ...props }) => {\n    const [currentTheme, setCurrentTheme] = useState('light');\n    useEffect(() => {\n        const detectTheme = () => {\n            if (typeof document !== 'undefined') {\n                const theme = document.documentElement.getAttribute('data-theme') || 'light';\n                setCurrentTheme(theme);\n            }\n        };\n        detectTheme();\n        const observer = new MutationObserver((mutations) => {\n            for (const mutation of mutations) {\n                if (mutation.type === 'attributes' &&\n                    mutation.attributeName === 'data-theme') {\n                    detectTheme();\n                }\n            }\n        });\n        if (typeof document !== 'undefined') {\n            observer.observe(document.documentElement, {\n                attributes: true,\n                attributeFilter: ['data-theme'],\n            });\n        }\n        return () => observer.disconnect();\n    }, []);\n    const ariaPlacement = getAriaPlacement(placement);\n    const offset = getOffsetForSize(size, customOffset);\n    const { minWidth, maxWidth } = getMenuWidthConstraints(size, customMinWidth, customMaxWidth);\n    const transformOrigin = getTransformOrigin(placement);\n    const themeClass = currentTheme === 'light' ? lightTheme : darkTheme;\n    const menuClassName = `${themeClass} ${buildMenuClassName(size, variant, className)}`;\n    const popoverProps = {\n        placement: ariaPlacement,\n        offset,\n        isDismissable,\n        className: `${themeClass} ${styles.menuPopover}`,\n        style: {\n            '--transform-origin': transformOrigin,\n        },\n    };\n    const menuProps = {\n        className: menuClassName,\n        style: {\n            minWidth: `${minWidth}px`,\n            maxWidth: `${maxWidth}px`,\n        },\n        onAction,\n        items,\n        ...props,\n    };\n    return (_jsx(Popover, { ...popoverProps, children: _jsx(AriaMenu, { ...menuProps, children: children }) }));\n};\nexport const MenuItem = forwardRef(({ children, id, textValue, variant = 'default', isDisabled = false, onAction, className, shortcut, startIcon, endIcon, ...props }, ref) => {\n    let parsedStartIcon = startIcon;\n    let parsedText = children;\n    if (Array.isArray(children) && children.length >= 2) {\n        const firstChild = children[0];\n        if (firstChild?.props?.icon) {\n            parsedStartIcon = firstChild;\n            parsedText = children.slice(1).join('');\n        }\n    }\n    const hasEndIcon = Boolean(endIcon);\n    const showShortcut = shouldShowShortcut(shortcut, hasEndIcon);\n    const menuItemClassName = buildMenuItemClassName('medium', variant, className);\n    const menuItemProps = {\n        id: id,\n        textValue: textValue || (typeof children === 'string' ? children : undefined),\n        isDisabled,\n        onAction,\n        className: menuItemClassName,\n        ...props,\n    };\n    return (_jsx(AriaMenuItem, { ref: ref, ...menuItemProps, children: _jsxs(\"div\", { className: styles.menuItemContent, children: [parsedStartIcon && (_jsx(\"div\", { className: styles.menuItemIcon, children: parsedStartIcon })), _jsx(\"span\", { className: styles.menuItemText, children: parsedText }), showShortcut && (_jsx(\"span\", { className: styles.menuItemShortcut, children: shortcut })), endIcon && _jsx(\"div\", { className: styles.menuItemIcon, children: endIcon })] }) }));\n});\nexport const MenuSection = ({ title, children, className, ...props }) => {\n    const sectionClassName = buildMenuSectionClassName(className);\n    const sectionProps = {\n        className: sectionClassName,\n        ...props,\n    };\n    return (_jsxs(Section, { ...sectionProps, children: [title && _jsx(\"div\", { className: styles.menuSectionHeader, children: title }), children] }));\n};\nexport const MenuSeparator = ({ className, ...props }) => {\n    const separatorClassName = buildMenuSeparatorClassName(className);\n    const separatorProps = {\n        className: separatorClassName,\n        ...props,\n    };\n    return _jsx(Separator, { ...separatorProps });\n};\nMenuTrigger.displayName = 'MenuTrigger';\nMenu.displayName = 'Menu';\nMenuItem.displayName = 'MenuItem';\nMenuSection.displayName = 'MenuSection';\nMenuSeparator.displayName = 'MenuSeparator';\n"],"names":["_jsx","AriaMenuTrigger","styles.menuPopover","AriaMenu","AriaMenuItem","_jsxs","styles.menuItemContent","styles.menuItemIcon","styles.menuItemText","styles.menuItemShortcut","styles.menuSectionHeader"],"mappings":"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"}