{"version":3,"file":"accordion.js","sources":["../../../src/ui/accordion/accordion.tsx"],"sourcesContent":["'use client';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { ChevronDown } from 'lucide-react';\nimport { Children, isValidElement, useCallback, useEffect, useRef, useState, } from 'react';\nimport { Icon } from '@/icons';\nimport { buildAccordionClassName, buildAccordionContentClassName, buildAccordionItemClassName, buildAccordionTriggerClassName, buildChevronClassName, buildContentInnerClassName, buildIconClassName, buildTriggerContentClassName, normalizeKeys, toggleKey, } from './helpers';\nexport const AccordionItem = ({ id, title, children, isDisabled = false, className, icon, isExpanded = false, onToggle, size = 'medium', variant = 'default', disableAnimation = false, }) => {\n    const contentRef = useRef(null);\n    const [contentHeight, setContentHeight] = useState(0);\n    useEffect(() => {\n        if (contentRef.current) {\n            const height = contentRef.current.scrollHeight;\n            setContentHeight(height);\n        }\n    }, [children, isExpanded]);\n    const handleClick = useCallback(() => {\n        if (!isDisabled && onToggle) {\n            onToggle();\n        }\n    }, [isDisabled, onToggle]);\n    const handleKeyDown = useCallback((e) => {\n        if (isDisabled)\n            return;\n        if (e.key === 'Enter' || e.key === ' ') {\n            e.preventDefault();\n            if (onToggle) {\n                onToggle();\n            }\n        }\n    }, [isDisabled, onToggle]);\n    return (_jsxs(\"div\", { className: buildAccordionItemClassName(variant, isDisabled, className), children: [_jsxs(\"button\", { type: \"button\", className: buildAccordionTriggerClassName(size), onClick: handleClick, onKeyDown: handleKeyDown, \"aria-expanded\": isExpanded, \"aria-controls\": `accordion-content-${id}`, disabled: isDisabled, \"data-expanded\": isExpanded, \"data-disabled\": isDisabled || undefined, children: [_jsxs(\"div\", { className: buildTriggerContentClassName(), children: [icon && (_jsx(\"div\", { className: buildIconClassName(disableAnimation), children: icon })), title] }), _jsx(\"div\", { className: buildChevronClassName(disableAnimation), children: _jsx(Icon, { icon: ChevronDown, size: \"sm\" }) })] }), _jsx(\"div\", { id: `accordion-content-${id}`, className: buildAccordionContentClassName(size, isExpanded, disableAnimation), \"data-expanded\": isExpanded, role: \"region\", \"aria-labelledby\": `accordion-trigger-${id}`, style: {\n                    '--accordion-content-height': `${contentHeight}px`,\n                }, children: _jsx(\"div\", { ref: contentRef, className: buildContentInnerClassName(), children: children }) })] }));\n};\nexport const Accordion = ({ items, children, selectionMode = 'single', variant = 'default', size = 'medium', expandedKeys: controlledKeys, defaultExpandedKeys, onExpandedChange, fullWidth = true, className, allowAllClosed = true, disableAnimation = false, }) => {\n    const [internalKeys, setInternalKeys] = useState(() => normalizeKeys(defaultExpandedKeys));\n    const isControlled = controlledKeys !== undefined;\n    const expandedKeys = isControlled\n        ? normalizeKeys(controlledKeys)\n        : internalKeys;\n    const handleToggle = useCallback((key) => {\n        const newKeys = toggleKey(expandedKeys, key, selectionMode, allowAllClosed);\n        if (!isControlled) {\n            setInternalKeys(newKeys);\n        }\n        if (onExpandedChange) {\n            onExpandedChange(newKeys);\n        }\n    }, [\n        expandedKeys,\n        selectionMode,\n        allowAllClosed,\n        isControlled,\n        onExpandedChange,\n    ]);\n    const handleKeyDown = useCallback((e) => {\n        const target = e.target;\n        const accordionElement = e.currentTarget;\n        const triggers = Array.from(accordionElement.querySelectorAll('button[aria-expanded]'));\n        const currentIndex = triggers.indexOf(target);\n        if (currentIndex === -1)\n            return;\n        let nextIndex = null;\n        switch (e.key) {\n            case 'ArrowDown':\n                e.preventDefault();\n                nextIndex = (currentIndex + 1) % triggers.length;\n                break;\n            case 'ArrowUp':\n                e.preventDefault();\n                nextIndex = currentIndex === 0 ? triggers.length - 1 : currentIndex - 1;\n                break;\n            case 'Home':\n                e.preventDefault();\n                nextIndex = 0;\n                break;\n            case 'End':\n                e.preventDefault();\n                nextIndex = triggers.length - 1;\n                break;\n        }\n        if (nextIndex !== null) {\n            triggers[nextIndex].focus();\n        }\n    }, []);\n    const renderContent = () => {\n        if (items && items.length > 0) {\n            return items.map((item) => (_jsx(AccordionItem, { ...item, isExpanded: expandedKeys.has(item.id), onToggle: () => handleToggle(item.id), size: size, variant: variant, disableAnimation: disableAnimation }, item.id)));\n        }\n        const childElements = [];\n        Children.forEach(children, (child) => {\n            if (isValidElement(child) && child.type === AccordionItem) {\n                const childProps = child.props;\n                childElements.push(_jsx(AccordionItem, { ...childProps, isExpanded: expandedKeys.has(childProps.id), onToggle: () => handleToggle(childProps.id), size: size, variant: variant, disableAnimation: disableAnimation }, childProps.id));\n            }\n        });\n        return childElements;\n    };\n    return (_jsx(\"div\", { className: buildAccordionClassName(variant, size, fullWidth, className), onKeyDown: handleKeyDown, \"aria-multiselectable\": selectionMode === 'multiple', children: renderContent() }));\n};\nAccordion.displayName = 'Accordion';\nAccordionItem.displayName = 'AccordionItem';\n"],"names":["_jsxs","_jsx"],"mappings":"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"}