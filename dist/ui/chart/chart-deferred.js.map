{"version":3,"file":"chart-deferred.js","sources":["../../../src/ui/chart/chart-deferred.tsx"],"sourcesContent":["'use client';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useEffect, useState } from 'react';\nimport { createDeferredComponent, DeferredHydration, } from '@/ui/utils/deferred-hydration';\nimport { ENHANCEMENT_CONFIGS } from '@/ui/utils/progressive-enhancement';\nimport { ChartSkeleton } from './chart-skeleton';\nconst HeavyChartInternal = ({ data, title, type = 'bar', height = 400, showLegend = true, animated = true, className = '', }) => {\n    const [isLoaded, setIsLoaded] = useState(false);\n    const [processedData, setProcessedData] = useState([]);\n    useEffect(() => {\n        const loadHeavyChart = async () => {\n            await new Promise((resolve) => setTimeout(resolve, 1000));\n            const processed = data.map((item, index) => ({\n                ...item,\n                color: item.color || `hsl(${(index * 137.5) % 360}, 70%, 50%)`,\n                processedValue: item.value * 1.1,\n            }));\n            setProcessedData(processed);\n            setIsLoaded(true);\n        };\n        loadHeavyChart();\n    }, [data]);\n    if (!isLoaded) {\n        return (_jsx(ChartSkeleton, { height: height, showTitle: !!title, showLegend: showLegend, legendItems: data.length, className: className }));\n    }\n    return (_jsxs(\"div\", { className: `chart-container ${className}`, children: [title && (_jsx(\"h3\", { className: \"mb-4 text-center text-lg font-semibold\", children: title })), _jsxs(\"div\", { className: \"relative rounded-lg border border-gray-200 bg-white p-4 shadow-sm dark:border-gray-700 dark:bg-gray-900\", style: { height }, children: [_jsx(\"div\", { className: \"flex h-full items-end justify-around gap-2 pb-8\", children: processedData.map((item, index) => {\n                            const barHeight = (item.value / Math.max(...data.map((d) => d.value))) * 80;\n                            return (_jsxs(\"div\", { className: \"flex flex-col items-center gap-2\", style: {\n                                    animation: animated\n                                        ? `slideUp 0.5s ease-out ${index * 0.1}s both`\n                                        : undefined,\n                                }, children: [_jsx(\"div\", { className: \"w-8 rounded-t transition-all duration-300 hover:opacity-80\", style: {\n                                            height: `${barHeight}%`,\n                                            backgroundColor: item.color,\n                                        }, title: `${item.label}: ${item.value}` }), _jsx(\"span\", { className: \"text-xs text-gray-600 dark:text-gray-400\", children: item.label })] }, item.label));\n                        }) }), _jsxs(\"div\", { className: \"absolute bottom-2 right-2 text-xs text-gray-500\", children: [\"Interactive Chart Loaded \\u2022 \", processedData.length, \" items\"] })] }), showLegend && (_jsx(\"div\", { className: \"mt-4 flex flex-wrap justify-center gap-3\", children: processedData.map((item) => (_jsxs(\"div\", { className: \"flex items-center gap-2\", children: [_jsx(\"div\", { className: \"h-3 w-3 rounded-full\", style: { backgroundColor: item.color } }), _jsxs(\"span\", { className: \"text-sm text-gray-700 dark:text-gray-300\", children: [item.label, \": \", item.value] })] }, item.label))) })), _jsx(\"style\", { jsx: true, children: `\n        @keyframes slideUp {\n          from {\n            height: 0;\n            opacity: 0;\n          }\n          to {\n            height: var(--final-height);\n            opacity: 1;\n          }\n        }\n      ` })] }));\n};\nexport const DeferredChart = (props) => (_jsx(DeferredHydration, { fallback: _jsx(ChartSkeleton, { height: props.height, showTitle: !!props.title, showLegend: props.showLegend, legendItems: props.data.length, className: props.className }), enhancementOptions: ENHANCEMENT_CONFIGS.HEAVY_COMPONENT, observerConfig: {\n        rootMargin: '100px',\n        threshold: 0.1,\n    }, delay: 100, children: _jsx(HeavyChartInternal, { ...props }) }));\nexport const DynamicChart = createDeferredComponent(() => Promise.resolve({ default: HeavyChartInternal }), {\n    loading: () => (_jsx(ChartSkeleton, { height: 400, showTitle: true, showLegend: true, legendItems: 3 })),\n    ssr: false,\n    hydrationOptions: {\n        enhancementOptions: ENHANCEMENT_CONFIGS.HEAVY_COMPONENT,\n        observerConfig: { rootMargin: '200px' },\n    },\n});\nexport const SAMPLE_CHART_DATA = [\n    {\n        label: 'Jan',\n        value: 65,\n        color: '#3B82F6',\n    },\n    {\n        label: 'Feb',\n        value: 78,\n        color: '#10B981',\n    },\n    {\n        label: 'Mar',\n        value: 52,\n        color: '#F59E0B',\n    },\n    {\n        label: 'Apr',\n        value: 91,\n        color: '#EF4444',\n    },\n    {\n        label: 'May',\n        value: 73,\n        color: '#8B5CF6',\n    },\n    {\n        label: 'Jun',\n        value: 86,\n        color: '#06B6D4',\n    },\n];\nDeferredChart.displayName = 'DeferredChart';\nDynamicChart.displayName = 'DynamicChart';\n"],"names":["_jsx","_jsxs"],"mappings":";;;;;;AAMA,MAAM,kBAAkB,GAAG,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,GAAG,KAAK,EAAE,MAAM,GAAG,GAAG,EAAE,UAAU,GAAG,IAAI,EAAE,QAAQ,GAAG,IAAI,EAAE,SAAS,GAAG,EAAE,GAAG,KAAK;AACjI,IAAI,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC;AACnD,IAAI,MAAM,CAAC,aAAa,EAAE,gBAAgB,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC;AAC1D,IAAI,SAAS,CAAC,MAAM;AACpB,QAAQ,MAAM,cAAc,GAAG,YAAY;AAC3C,YAAY,MAAM,IAAI,OAAO,CAAC,CAAC,OAAO,KAAK,UAAU,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AACrE,YAAY,MAAM,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK,MAAM;AACzD,gBAAgB,GAAG,IAAI;AACvB,gBAAgB,KAAK,EAAE,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,CAAC,KAAK,GAAG,KAAK,IAAI,GAAG,CAAC,WAAW,CAAC;AAC9E,gBAAgB,cAAc,EAAE,IAAI,CAAC,KAAK,GAAG,GAAG;AAChD,aAAa,CAAC,CAAC;AACf,YAAY,gBAAgB,CAAC,SAAS,CAAC;AACvC,YAAY,WAAW,CAAC,IAAI,CAAC;AAC7B,QAAQ,CAAC;AACT,QAAQ,cAAc,EAAE;AACxB,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;AACd,IAAI,IAAI,CAAC,QAAQ,EAAE;AACnB,QAAQ,QAAQA,GAAI,CAAC,aAAa,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,CAAC,CAAC,KAAK,EAAE,UAAU,EAAE,UAAU,EAAE,WAAW,EAAE,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,CAAC;AACnJ,IAAI;AACJ,IAAI,QAAQC,IAAK,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,CAAC,gBAAgB,EAAE,SAAS,CAAC,CAAC,EAAE,QAAQ,EAAE,CAAC,KAAK,KAAKD,GAAI,CAAC,IAAI,EAAE,EAAE,SAAS,EAAE,wCAAwC,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAC,EAAEC,IAAK,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,yGAAyG,EAAE,KAAK,EAAE,EAAE,MAAM,EAAE,EAAE,QAAQ,EAAE,CAACD,GAAI,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,iDAAiD,EAAE,QAAQ,EAAE,aAAa,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK,KAAK;AAC9c,4BAA4B,MAAM,SAAS,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,EAAE;AACvG,4BAA4B,QAAQC,IAAK,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,kCAAkC,EAAE,KAAK,EAAE;AACzG,oCAAoC,SAAS,EAAE;AAC/C,0CAA0C,CAAC,sBAAsB,EAAE,KAAK,GAAG,GAAG,CAAC,MAAM;AACrF,0CAA0C,SAAS;AACnD,iCAAiC,EAAE,QAAQ,EAAE,CAACD,GAAI,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,4DAA4D,EAAE,KAAK,EAAE;AAC5I,4CAA4C,MAAM,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC;AACnE,4CAA4C,eAAe,EAAE,IAAI,CAAC,KAAK;AACvE,yCAAyC,EAAE,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,EAAEA,GAAI,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,0CAA0C,EAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC;AAClM,wBAAwB,CAAC,CAAC,EAAE,CAAC,EAAEC,IAAK,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,iDAAiD,EAAE,QAAQ,EAAE,CAAC,kCAAkC,EAAE,aAAa,CAAC,MAAM,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU,KAAKD,GAAI,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,0CAA0C,EAAE,QAAQ,EAAE,aAAa,CAAC,GAAG,CAAC,CAAC,IAAI,MAAMC,IAAK,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,yBAAyB,EAAE,QAAQ,EAAE,CAACD,GAAI,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,sBAAsB,EAAE,KAAK,EAAE,EAAE,eAAe,EAAE,IAAI,CAAC,KAAK,EAAE,EAAE,CAAC,EAAEC,IAAK,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,0CAA0C,EAAE,QAAQ,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAED,GAAI,CAAC,OAAO,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,QAAQ,EAAE;AACzoB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC;AACd,CAAC;AACW,MAAC,aAAa,GAAG,CAAC,KAAK,MAAMA,GAAI,CAAC,iBAAiB,EAAE,EAAE,QAAQ,EAAEA,GAAI,CAAC,aAAa,EAAE,EAAE,MAAM,EAAE,KAAK,CAAC,MAAM,EAAE,SAAS,EAAE,CAAC,CAAC,KAAK,CAAC,KAAK,EAAE,UAAU,EAAE,KAAK,CAAC,UAAU,EAAE,WAAW,EAAE,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,SAAS,EAAE,KAAK,CAAC,SAAS,EAAE,CAAC,EAAE,kBAAkB,EAAE,mBAAmB,CAAC,eAAe,EAAE,cAAc,EAAE;AACzT,QAAQ,UAAU,EAAE,OAAO;AAC3B,QAAQ,SAAS,EAAE,GAAG;AACtB,KAAK,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,EAAEA,GAAI,CAAC,kBAAkB,EAAE,EAAE,GAAG,KAAK,EAAE,CAAC,EAAE,CAAC;AAC1D,MAAC,YAAY,GAAG,uBAAuB,CAAC,MAAM,OAAO,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,kBAAkB,EAAE,CAAC,EAAE;AAC5G,IAAI,OAAO,EAAE,OAAOA,GAAI,CAAC,aAAa,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,SAAS,EAAE,IAAI,EAAE,UAAU,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,EAAE,CAAC,CAAC;AAC5G,IAAI,GAAG,EAAE,KAAK;AACd,IAAI,gBAAgB,EAAE;AACtB,QAAQ,kBAAkB,EAAE,mBAAmB,CAAC,eAAe;AAC/D,QAAQ,cAAc,EAAE,EAAE,UAAU,EAAE,OAAO,EAAE;AAC/C,KAAK;AACL,CAAC;AACW,MAAC,iBAAiB,GAAG;AACjC,IAAI;AACJ,QAAQ,KAAK,EAAE,KAAK;AACpB,QAAQ,KAAK,EAAE,EAAE;AACjB,QAAQ,KAAK,EAAE,SAAS;AACxB,KAAK;AACL,IAAI;AACJ,QAAQ,KAAK,EAAE,KAAK;AACpB,QAAQ,KAAK,EAAE,EAAE;AACjB,QAAQ,KAAK,EAAE,SAAS;AACxB,KAAK;AACL,IAAI;AACJ,QAAQ,KAAK,EAAE,KAAK;AACpB,QAAQ,KAAK,EAAE,EAAE;AACjB,QAAQ,KAAK,EAAE,SAAS;AACxB,KAAK;AACL,IAAI;AACJ,QAAQ,KAAK,EAAE,KAAK;AACpB,QAAQ,KAAK,EAAE,EAAE;AACjB,QAAQ,KAAK,EAAE,SAAS;AACxB,KAAK;AACL,IAAI;AACJ,QAAQ,KAAK,EAAE,KAAK;AACpB,QAAQ,KAAK,EAAE,EAAE;AACjB,QAAQ,KAAK,EAAE,SAAS;AACxB,KAAK;AACL,IAAI;AACJ,QAAQ,KAAK,EAAE,KAAK;AACpB,QAAQ,KAAK,EAAE,EAAE;AACjB,QAAQ,KAAK,EAAE,SAAS;AACxB,KAAK;AACL;AACA,aAAa,CAAC,WAAW,GAAG,eAAe;AAC3C,YAAY,CAAC,WAAW,GAAG,cAAc;;;;"}