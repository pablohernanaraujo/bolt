{"version":3,"file":"toast.js","sources":["../../../src/ui/toast/toast.tsx"],"sourcesContent":["'use client';\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { createContext, useContext, useEffect, useRef, useState, } from 'react';\nimport { createPortal } from 'react-dom';\nimport { AlertCircle, AlertTriangle, CheckCircle, Info, X } from '@/icons';\nimport { buildToastClassName, buildToastContainerClassName, generateToastId, getAriaRole, getDefaultDuration, } from './helpers';\nimport * as styles from './toast.css';\nconst ToastContext = createContext(null);\nexport const useToast = () => {\n    const context = useContext(ToastContext);\n    if (!context) {\n        throw new Error('useToast must be used within a ToastProvider');\n    }\n    return context;\n};\nconst VARIANT_ICONS = {\n    success: CheckCircle,\n    error: AlertCircle,\n    warning: AlertTriangle,\n    info: Info,\n};\nconst ToastComponent = ({ id, variant = 'info', title, description, isClosable = true, duration = null, onClose, status = 'polite', icon, className, isVisible, position, }) => {\n    const [progress, setProgress] = useState(100);\n    const [isPaused, setIsPaused] = useState(false);\n    const timeoutRef = useRef(undefined);\n    const startTimeRef = useRef(0);\n    const remainingTimeRef = useRef(0);\n    const IconComponent = VARIANT_ICONS[variant];\n    const finalDuration = duration ?? getDefaultDuration(variant);\n    const ariaRole = getAriaRole(variant);\n    useEffect(() => {\n        if (finalDuration === null || finalDuration <= 0)\n            return;\n        const startTimer = (timeLeft) => {\n            startTimeRef.current = Date.now();\n            remainingTimeRef.current = timeLeft;\n            timeoutRef.current = setTimeout(() => {\n                if (onClose) {\n                    onClose(id);\n                }\n            }, timeLeft);\n            const updateProgress = () => {\n                if (!isPaused) {\n                    const elapsed = Date.now() - startTimeRef.current;\n                    const newProgress = Math.max(0, ((remainingTimeRef.current - elapsed) / finalDuration) * 100);\n                    setProgress(newProgress);\n                    if (newProgress > 0) {\n                        requestAnimationFrame(updateProgress);\n                    }\n                }\n            };\n            updateProgress();\n        };\n        if (isVisible && !isPaused) {\n            startTimer(remainingTimeRef.current || finalDuration);\n        }\n        return () => {\n            if (timeoutRef.current) {\n                clearTimeout(timeoutRef.current);\n            }\n        };\n    }, [id, finalDuration, onClose, isVisible, isPaused]);\n    const handleMouseEnter = () => {\n        if (finalDuration !== null && finalDuration > 0) {\n            setIsPaused(true);\n            if (timeoutRef.current) {\n                clearTimeout(timeoutRef.current);\n                const elapsed = Date.now() - startTimeRef.current;\n                remainingTimeRef.current = Math.max(0, remainingTimeRef.current - elapsed);\n            }\n        }\n    };\n    const handleMouseLeave = () => {\n        if (finalDuration !== null && finalDuration > 0) {\n            setIsPaused(false);\n        }\n    };\n    const handleClose = () => {\n        if (onClose) {\n            onClose(id);\n        }\n    };\n    const handleKeyDown = (event) => {\n        if (event.key === 'Escape' && isClosable && onClose) {\n            event.preventDefault();\n            onClose(id);\n        }\n    };\n    return (_jsxs(\"div\", { role: ariaRole, \"aria-live\": status, \"aria-atomic\": \"true\", className: buildToastClassName(variant, isVisible, className), onMouseEnter: handleMouseEnter, onMouseLeave: handleMouseLeave, onKeyDown: handleKeyDown, tabIndex: isClosable ? 0 : -1, \"data-testid\": `toast-${id}`, children: [_jsx(\"div\", { className: `${styles.toastIcon} ${styles.toastIconVariants[variant]}`, children: icon || _jsx(IconComponent, { size: 20 }) }), _jsxs(\"div\", { className: styles.toastContent, children: [title && (_jsx(\"div\", { className: styles.toastTitle, \"data-testid\": \"toast-title\", children: title })), description && (_jsx(\"div\", { className: styles.toastDescription, \"data-testid\": \"toast-description\", children: description }))] }), isClosable && (_jsx(\"button\", { type: \"button\", className: styles.toastCloseButton, onClick: handleClose, \"aria-label\": \"Close notification\", \"data-testid\": \"toast-close\", children: _jsx(X, { size: 16 }) })), finalDuration !== null && finalDuration > 0 && (_jsx(\"div\", { className: `${styles.toastProgressBar} ${styles.toastProgressBarVariants[variant]}`, style: {\n                    transform: `scaleX(${progress / 100})`,\n                    transitionDuration: isPaused ? '0s' : '100ms',\n                }, \"data-testid\": \"toast-progress\" }))] }));\n};\nexport const ToastProvider = ({ children, position = 'bottom', max = 5, duration = 5000, }) => {\n    const [toasts, setToasts] = useState([]);\n    const [isMounted, setIsMounted] = useState(false);\n    useEffect(() => {\n        setIsMounted(true);\n    }, []);\n    const addToast = (options) => {\n        const id = generateToastId();\n        const newToast = {\n            ...options,\n            id,\n            duration: options.duration ?? duration,\n            createdAt: Date.now(),\n            isVisible: true,\n        };\n        setToasts((prev) => {\n            const updated = [newToast, ...prev];\n            if (updated.length > max) {\n                return updated.slice(0, max);\n            }\n            return updated;\n        });\n        return id;\n    };\n    const closeToast = (id) => {\n        setToasts((prev) => prev.map((toast) => toast.id === id\n            ? {\n                ...toast,\n                isVisible: false,\n            }\n            : toast));\n        setTimeout(() => {\n            setToasts((prev) => prev.filter((toast) => toast.id !== id));\n        }, 300);\n    };\n    const closeAllToasts = () => {\n        setToasts((prev) => prev.map((toast) => ({\n            ...toast,\n            isVisible: false,\n        })));\n        setTimeout(() => {\n            setToasts([]);\n        }, 300);\n    };\n    const updateToast = (id, options) => {\n        setToasts((prev) => prev.map((toast) => toast.id === id\n            ? {\n                ...toast,\n                ...options,\n            }\n            : toast));\n    };\n    const contextValue = {\n        toast: addToast,\n        close: closeToast,\n        closeAll: closeAllToasts,\n        update: updateToast,\n    };\n    const toastPortal = isMounted &&\n        createPortal(_jsx(\"div\", { className: buildToastContainerClassName(position), \"data-position\": position, \"data-testid\": \"toast-container\", children: toasts.map((toast) => (_jsx(ToastComponent, { ...toast, position: position, onClose: closeToast }, toast.id))) }), document.body);\n    return (_jsxs(ToastContext.Provider, { value: contextValue, children: [children, toastPortal] }));\n};\nexport const Toast = (props) => (_jsx(ToastComponent, { ...props, isVisible: true, position: \"bottom\" }));\n"],"names":["_jsxs","_jsx","styles.toastIcon","styles.toastIconVariants","styles.toastContent","styles.toastTitle","styles.toastDescription","styles.toastCloseButton","styles.toastProgressBar","styles.toastProgressBarVariants"],"mappings":"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"}